
/*********************************************************************
	SYSTEM Lillebro
	Module for PROCESS IndicatorLight
	Filename: IndicatorLight.c
	generated by CIP Tool(R) Version 4.41.00
		January 4, 2015  3:20:27 am
	activated code options:
		PENDING_ information
		'unsigned char' for 'enum'
		'unsigned char' for delays
		C-code
*********************************************************************/

/* Include Files */

#include "mDriveUnit.h"

/* Process Macro Definitions */

#define SELF status_IndicatorLight.write_access_
#define STATUS status_IndicatorLight.read_access_
#define TIME time_mDriveUnit

/* Process Definitions */

/* MODES */
#define normal 1

/* STATES */
#define ShowAvoid 1
#define ShowWander 2


/* INPULSES */
#define IP_WANDER 1
#define IP_AVOID 2


/* OUTPULSES */

#define O7_AVOID 16
#define O7_WANDER 17
#define O5_GO_BACKWARD 8
#define O5_GO_STRAIGHT 7
#define O5_STOP 9
#define O5_TURN_LEFT 5
#define O5_TURN_RIGHT 6
#define O3_BWD 10
#define O3_FWD 3
#define O3_STOP 4
#define O3_TURN_LEFT 2
#define O3_TURN_RIGHT 1
#define O8_SHOW_AVOID 14
#define O8_SHOW_WANDER 15
#define O6_ATTENTION 11
#define O6_CLEAR 13
#define O6_DANGER 12

/* External Declarations */

extern unsigned char time_mDriveUnit;
extern union tCHNOUT_mDriveUnit CHNOUT_mDriveUnit;

void fUPDATE_Controller (void);
int fPULSE_WanderLightController (unsigned char name_);

/* Global Declarations */

union tSTATUS_IndicatorLight status_IndicatorLight;

/* Function Prototypes */

int fPULSE_IndicatorLight (unsigned char name_);
void fINIT_IndicatorLight (void);

/* Input Channel Functions */

int fPULSE_IndicatorLight (unsigned char name_)
{
	switch (name_)
	{
		/***  INPULSE AVOID  ***/
	case O7_AVOID:		/***  PULSE CAST from PROCESS Behavior  ***/
		switch (status_IndicatorLight.read_access_.STATE)
		{
		case 2:  /* STATE ShowWander */
			status_IndicatorLight.write_access_.STATE = 1;  /* STATE ShowAvoid */
			fPULSE_WanderLightController (O8_SHOW_AVOID);
			break;
		default: 
			break;
		}
		break;
		/***  INPULSE WANDER  ***/
	case O7_WANDER:		/***  PULSE CAST from PROCESS Behavior  ***/
		switch (status_IndicatorLight.read_access_.STATE)
		{
		case 1:  /* STATE ShowAvoid */
			status_IndicatorLight.write_access_.STATE = 2;  /* STATE ShowWander */
			fPULSE_WanderLightController (O8_SHOW_WANDER);
			break;
		case 2:  /* STATE ShowWander */
			status_IndicatorLight.write_access_.STATE = 2;  /* STATE ShowWander */
			fPULSE_WanderLightController (O8_SHOW_WANDER);
			break;
		default: 
			break;
		}
		break;
	default: 
		return 0;
	}
	return 1;
}

/* Process Initialization Function */

void fINIT_IndicatorLight (void)
{
	status_IndicatorLight.write_access_.STATE = 2;  /* STATE ShowWander */
}

/*********************************************************************
	End of Module for PROCESS IndicatorLight
*********************************************************************/
